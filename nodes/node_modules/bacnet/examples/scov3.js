// Wrapper for Subscribed-COV
const deviceAddress = process.argv[2]

// Cov Data format
const subscriberProcessIdentifier = process.argv[3] // uint_32

// add BACNET_OBJECT_ID monitoredObjectId
const monitoredObjectIdType = process.argv[4] // uint16_t
const monitoredObjectIdInstance = process.argv[5] // uint32_t

const issueConfirmedNotifications = process.argv[6] // bool (optional)
const lifetime = process.argv[7] // uint_32 (optional)

const covIncrement = process.argv[9] // float (optional)

const bacnet = require('../bacnet.js')
const r = bacnet.init({
  datalink: {
    iface: process.env.BACNET_INTERFACE,
    ip_port: process.env.BACNET_PORT || 0xBAC0
  },
  device: false
})

r.subscribeCov(deviceAddress, subscriberProcessIdentifier, monitoredObjectIdType, monitoredObjectIdInstance, issueConfirmedNotifications, lifetime, covIncrement)

setTimeout(function () {}, 1000)
